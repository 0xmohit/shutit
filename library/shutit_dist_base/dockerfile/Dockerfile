FROM ubuntu:latest

RUN apt-get update

RUN apt-get purge -q -y vim-common vim-tiny xkb-data ucf ureadahead whiptail procps plymouth ntpdate net-tools module-init-tools mime-support logrotate makedev lockfile-progs locales apt-utils busybox-initramfs cpio debconf-i18n libtext-charwidth-perl libtext-iconv-perl libsqlite3-0 libssl1.0.0 libpopt0 libpng12-0 file libnih1 libp11-kit0 ibnewt0.52 libncursesw5 libklibc libkmod2 libpam-cap liblockfile1 libmagic1 liblockfile-bin liblocale-gettext-perl libmodule-pluggable-perl libgpg-error0 libfribidi0 libexpat1 libestr0 libdrm2 libdbus-1-3 libcap2-bin libbsd0 libapt-inst1.5 isc-dhcp-common netbase iproute2

# Useful
# gcc for building software
# wget for getting source 
# g++ for some build reqs
# libssl-dev for early build deps
# docbook - no time to work out how to install
RUN apt-get install -q -y gcc wget g++ libssl-dev docbook docbook-xsl-ns

RUN apt-get purge -q -y manpages-dev manpages

RUN apt-get -y autoremove
RUN apt-get clean

# Remove apt by hand
#RUN rm -f /etc/apt/apt.conf.d/01autoremove /etc/apt/apt.conf.d/20changelog /etc/cron.daily/apt /etc/kernel/postinst.d/apt-auto-removal /etc/logrotate.d/apt /usr/bin/apt-cache /usr/bin/apt-cdrom /usr/bin/apt-config /usr/bin/apt-get /usr/bin/apt-key /usr/bin/apt-mark /usr/lib/apt/methods/bzip2 /usr/lib/apt/methods/cdrom /usr/lib/apt/methods/copy /usr/lib/apt/methods/file /usr/lib/apt/methods/ftp /usr/lib/apt/methods/gpgv /usr/lib/apt/methods/gzip /usr/lib/apt/methods/http /usr/lib/apt/methods/lzma /usr/lib/apt/methods/mirror /usr/lib/apt/methods/rred /usr/lib/apt/methods/rsh /usr/lib/apt/methods/ssh /usr/lib/apt/methods/xz /usr/lib/dpkg/methods/apt/desc.apt /usr/lib/dpkg/methods/apt/install /usr/lib/dpkg/methods/apt/names /usr/lib/dpkg/methods/apt/setup /usr/lib/dpkg/methods/apt/update /usr/share/apt/ubuntu-archive.gpg /usr/share/bug/apt/script /usr/share/doc/apt/NEWS.Debian.gz /usr/share/doc/apt/changelog.gz /usr/share/doc/apt/copyright /usr/share/doc/apt/examples/apt-https-method-example.conf.gz /usr/share/doc/apt/examples/apt.conf /usr/share/doc/apt/examples/configure-index.gz /usr/share/doc/apt/examples/sources.list /usr/share/locale/ar/LC_MESSAGES/apt.mo /usr/share/locale/ast/LC_MESSAGES/apt.mo /usr/share/locale/bg/LC_MESSAGES/apt.mo /usr/share/locale/bs/LC_MESSAGES/apt.mo /usr/share/locale/ca/LC_MESSAGES/apt.mo /usr/share/locale/cs/LC_MESSAGES/apt.mo /usr/share/locale/cy/LC_MESSAGES/apt.mo /usr/share/locale/da/LC_MESSAGES/apt.mo /usr/share/locale/de/LC_MESSAGES/apt.mo /usr/share/locale/dz/LC_MESSAGES/apt.mo /usr/share/locale/el/LC_MESSAGES/apt.mo /usr/share/locale/es/LC_MESSAGES/apt.mo /usr/share/locale/eu/LC_MESSAGES/apt.mo /usr/share/locale/fi/LC_MESSAGES/apt.mo /usr/share/locale/fr/LC_MESSAGES/apt.mo /usr/share/locale/gl/LC_MESSAGES/apt.mo /usr/share/locale/hu/LC_MESSAGES/apt.mo /usr/share/locale/it/LC_MESSAGES/apt.mo /usr/share/locale/ja/LC_MESSAGES/apt.mo /usr/share/locale/km/LC_MESSAGES/apt.mo /usr/share/locale/ko/LC_MESSAGES/apt.mo /usr/share/locale/ku/LC_MESSAGES/apt.mo /usr/share/locale/lt/LC_MESSAGES/apt.mo /usr/share/locale/mr/LC_MESSAGES/apt.mo /usr/share/locale/nb/LC_MESSAGES/apt.mo /usr/share/locale/ne/LC_MESSAGES/apt.mo /usr/share/locale/nl/LC_MESSAGES/apt.mo /usr/share/locale/nn/LC_MESSAGES/apt.mo /usr/share/locale/pl/LC_MESSAGES/apt.mo /usr/share/locale/pt/LC_MESSAGES/apt.mo /usr/share/locale/pt_BR/LC_MESSAGES/apt.mo /usr/share/locale/ro/LC_MESSAGES/apt.mo /usr/share/locale/ru/LC_MESSAGES/apt.mo /usr/share/locale/sk/LC_MESSAGES/apt.mo /usr/share/locale/sl/LC_MESSAGES/apt.mo /usr/share/locale/sv/LC_MESSAGES/apt.mo /usr/share/locale/th/LC_MESSAGES/apt.mo /usr/share/locale/tl/LC_MESSAGES/apt.mo /usr/share/locale/uk/LC_MESSAGES/apt.mo /usr/share/locale/vi/LC_MESSAGES/apt.mo /usr/share/locale/zh_CN/LC_MESSAGES/apt.mo /usr/share/locale/zh_TW/LC_MESSAGES/apt.mo /usr/share/man/de/man5/apt.conf.5.gz /usr/share/man/de/man5/apt_preferences.5.gz /usr/share/man/de/man5/sources.list.5.gz /usr/share/man/de/man8/apt-cache.8.gz /usr/share/man/de/man8/apt-cdrom.8.gz /usr/share/man/de/man8/apt-config.8.gz /usr/share/man/de/man8/apt-get.8.gz /usr/share/man/de/man8/apt-key.8.gz /usr/share/man/de/man8/apt-mark.8.gz /usr/share/man/de/man8/apt-secure.8.gz /usr/share/man/de/man8/apt.8.gz /usr/share/man/es/man5/apt.conf.5.gz /usr/share/man/es/man5/apt_preferences.5.gz /usr/share/man/es/man5/sources.list.5.gz /usr/share/man/es/man8/apt-cache.8.gz /usr/share/man/es/man8/apt-cdrom.8.gz /usr/share/man/es/man8/apt-config.8.gz /usr/share/man/es/man8/apt-get.8.gz /usr/share/man/es/man8/apt-key.8.gz /usr/share/man/es/man8/apt-secure.8.gz /usr/share/man/es/man8/apt.8.gz /usr/share/man/fr/man5/apt.conf.5.gz /usr/share/man/fr/man5/apt_preferences.5.gz /usr/share/man/fr/man5/sources.list.5.gz /usr/share/man/fr/man8/apt-cache.8.gz /usr/share/man/fr/man8/apt-cdrom.8.gz /usr/share/man/fr/man8/apt-config.8.gz /usr/share/man/fr/man8/apt-get.8.gz /usr/share/man/fr/man8/apt-key.8.gz /usr/share/man/fr/man8/apt-secure.8.gz /usr/share/man/fr/man8/apt.8.gz /usr/share/man/ja/man5/apt.conf.5.gz /usr/share/man/ja/man5/apt_preferences.5.gz /usr/share/man/ja/man5/sources.list.5.gz /usr/share/man/ja/man8/apt-cache.8.gz /usr/share/man/ja/man8/apt-cdrom.8.gz /usr/share/man/ja/man8/apt-config.8.gz /usr/share/man/ja/man8/apt-get.8.gz /usr/share/man/ja/man8/apt-key.8.gz /usr/share/man/ja/man8/apt-secure.8.gz /usr/share/man/ja/man8/apt.8.gz /usr/share/man/man5/apt.conf.5.gz /usr/share/man/man5/apt_preferences.5.gz /usr/share/man/man5/sources.list.5.gz /usr/share/man/man8/apt-cache.8.gz /usr/share/man/man8/apt-cdrom.8.gz /usr/share/man/man8/apt-config.8.gz /usr/share/man/man8/apt-get.8.gz /usr/share/man/man8/apt-key.8.gz /usr/share/man/man8/apt-mark.8.gz /usr/share/man/man8/apt-secure.8.gz /usr/share/man/man8/apt.8.gz /usr/share/man/pl/man8/apt-cache.8.gz /usr/share/man/pl/man8/apt-cdrom.8.gz /usr/share/man/pl/man8/apt-config.8.gz /usr/share/man/pl/man8/apt-get.8.gz /usr/share/man/pl/man8/apt-key.8.gz /usr/share/man/pl/man8/apt.8.gz /usr/share/man/pt/man5/apt.conf.5.gz /usr/share/man/pt/man5/apt_preferences.5.gz /usr/share/man/pt/man5/sources.list.5.gz /usr/share/man/pt/man8/apt-cache.8.gz /usr/share/man/pt/man8/apt-cdrom.8.gz /usr/share/man/pt/man8/apt-config.8.gz /usr/share/man/pt/man8/apt-get.8.gz /usr/share/man/pt/man8/apt-key.8.gz /usr/share/man/pt/man8/apt-secure.8.gz /usr/share/man/pt/man8/apt.8.gz /usr/bin/apt
#RUN rm -rf /var/lib/apt

# Remove dpkg by hand
#RUN rm -f /etc/alternatives/README /etc/cron.daily/dpkg /etc/dpkg/dpkg.cfg /etc/dpkg/dpkg.cfg.d/multiarch /etc/logrotate.d/dpkg /sbin/start-stop-daemon /usr/bin/dpkg /usr/bin/dpkg-deb /usr/bin/dpkg-divert /usr/bin/dpkg-maintscript-helper /usr/bin/dpkg-query /usr/bin/dpkg-split /usr/bin/dpkg-statoverride /usr/bin/dpkg-trigger /usr/bin/update-alternatives /usr/sbin/dpkg-divert /usr/sbin/dpkg-statoverride /usr/sbin/install-info /usr/sbin/update-alternatives /usr/share/doc/dpkg/AUTHORS /usr/share/doc/dpkg/README.feature-removal-schedule /usr/share/doc/dpkg/THANKS.gz /usr/share/doc/dpkg/changelog.Debian.gz /usr/share/doc/dpkg/copyright /usr/share/doc/dpkg/usertags.gz /usr/share/dpkg/abitable /usr/share/dpkg/archtable /usr/share/dpkg/cputable /usr/share/dpkg/ostable /usr/share/dpkg/triplettable /usr/share/lintian/overrides/dpkg /usr/share/locale/ast/LC_MESSAGES/dpkg.mo /usr/share/locale/bs/LC_MESSAGES/dpkg.mo /usr/share/locale/ca/LC_MESSAGES/dpkg.mo /usr/share/locale/cs/LC_MESSAGES/dpkg.mo /usr/share/locale/da/LC_MESSAGES/dpkg.mo /usr/share/locale/de/LC_MESSAGES/dpkg.mo /usr/share/locale/dz/LC_MESSAGES/dpkg.mo /usr/share/locale/el/LC_MESSAGES/dpkg.mo /usr/share/locale/eo/LC_MESSAGES/dpkg.mo /usr/share/locale/es/LC_MESSAGES/dpkg.mo /usr/share/locale/et/LC_MESSAGES/dpkg.mo /usr/share/locale/eu/LC_MESSAGES/dpkg.mo /usr/share/locale/fr/LC_MESSAGES/dpkg.mo /usr/share/locale/gl/LC_MESSAGES/dpkg.mo /usr/share/locale/hu/LC_MESSAGES/dpkg.mo /usr/share/locale/id/LC_MESSAGES/dpkg.mo /usr/share/locale/it/LC_MESSAGES/dpkg.mo /usr/share/locale/ja/LC_MESSAGES/dpkg.mo /usr/share/locale/km/LC_MESSAGES/dpkg.mo /usr/share/locale/ko/LC_MESSAGES/dpkg.mo /usr/share/locale/ku/LC_MESSAGES/dpkg.mo /usr/share/locale/lt/LC_MESSAGES/dpkg.mo /usr/share/locale/mr/LC_MESSAGES/dpkg.mo /usr/share/locale/nb/LC_MESSAGES/dpkg.mo /usr/share/locale/ne/LC_MESSAGES/dpkg.mo /usr/share/locale/nl/LC_MESSAGES/dpkg.mo /usr/share/locale/nn/LC_MESSAGES/dpkg.mo /usr/share/locale/pa/LC_MESSAGES/dpkg.mo /usr/share/locale/pl/LC_MESSAGES/dpkg.mo /usr/share/locale/pt/LC_MESSAGES/dpkg.mo /usr/share/locale/pt_BR/LC_MESSAGES/dpkg.mo /usr/share/locale/ro/LC_MESSAGES/dpkg.mo /usr/share/locale/ru/LC_MESSAGES/dpkg.mo /usr/share/locale/sk/LC_MESSAGES/dpkg.mo /usr/share/locale/sv/LC_MESSAGES/dpkg.mo /usr/share/locale/th/LC_MESSAGES/dpkg.mo /usr/share/locale/tl/LC_MESSAGES/dpkg.mo /usr/share/locale/vi/LC_MESSAGES/dpkg.mo /usr/share/locale/zh_CN/LC_MESSAGES/dpkg.mo /usr/share/locale/zh_TW/LC_MESSAGES/dpkg.mo /usr/share/man/de/man1/dpkg-deb.1.gz /usr/share/man/de/man1/dpkg-maintscript-helper.1.gz /usr/share/man/de/man1/dpkg-query.1.gz /usr/share/man/de/man1/dpkg-split.1.gz /usr/share/man/de/man1/dpkg-trigger.1.gz /usr/share/man/de/man1/dpkg.1.gz /usr/share/man/de/man5/dpkg.cfg.5.gz /usr/share/man/de/man8/dpkg-divert.8.gz /usr/share/man/de/man8/dpkg-statoverride.8.gz /usr/share/man/de/man8/start-stop-daemon.8.gz /usr/share/man/de/man8/update-alternatives.8.gz /usr/share/man/es/man1/dpkg-deb.1.gz /usr/share/man/es/man1/dpkg-maintscript-helper.1.gz /usr/share/man/es/man1/dpkg-query.1.gz /usr/share/man/es/man1/dpkg-split.1.gz /usr/share/man/es/man1/dpkg-trigger.1.gz /usr/share/man/es/man1/dpkg.1.gz /usr/share/man/es/man5/dpkg.cfg.5.gz /usr/share/man/es/man8/dpkg-divert.8.gz /usr/share/man/es/man8/dpkg-statoverride.8.gz /usr/share/man/es/man8/update-alternatives.8.gz /usr/share/man/fr/man1/dpkg-deb.1.gz /usr/share/man/fr/man1/dpkg-maintscript-helper.1.gz /usr/share/man/fr/man1/dpkg-query.1.gz /usr/share/man/fr/man1/dpkg-split.1.gz /usr/share/man/fr/man1/dpkg-trigger.1.gz /usr/share/man/fr/man1/dpkg.1.gz /usr/share/man/fr/man5/dpkg.cfg.5.gz /usr/share/man/fr/man8/dpkg-divert.8.gz /usr/share/man/fr/man8/dpkg-statoverride.8.gz /usr/share/man/fr/man8/update-alternatives.8.gz /usr/share/man/hu/man5/dpkg.cfg.5.gz /usr/share/man/man1/dpkg-deb.1.gz /usr/share/man/man1/dpkg-maintscript-helper.1.gz /usr/share/man/man1/dpkg-query.1.gz /usr/share/man/man1/dpkg-split.1.gz /usr/share/man/man1/dpkg-trigger.1.gz /usr/share/man/man1/dpkg.1.gz /usr/share/man/man5/dpkg.cfg.5.gz /usr/share/man/man8/dpkg-divert.8.gz /usr/share/man/man8/dpkg-statoverride.8.gz /usr/share/man/man8/start-stop-daemon.8.gz /usr/share/man/man8/update-alternatives.8.gz /usr/share/man/pl/man1/dpkg-deb.1.gz /usr/share/man/pl/man1/dpkg-split.1.gz /usr/share/man/pl/man1/dpkg-trigger.1.gz /usr/share/man/pl/man1/dpkg.1.gz /usr/share/man/pl/man5/dpkg.cfg.5.gz /usr/share/man/pl/man8/dpkg-divert.8.gz /usr/share/man/pl/man8/dpkg-statoverride.8.gz /usr/share/man/pl/man8/update-alternatives.8.gz /usr/share/man/sv/man1/dpkg-deb.1.gz /usr/share/man/sv/man1/dpkg-maintscript-helper.1.gz /usr/share/man/sv/man1/dpkg-query.1.gz /usr/share/man/sv/man1/dpkg-split.1.gz /usr/share/man/sv/man1/dpkg-trigger.1.gz /usr/share/man/sv/man1/dpkg.1.gz /usr/share/man/sv/man5/dpkg.cfg.5.gz /usr/share/man/sv/man8/dpkg-divert.8.gz /usr/share/man/sv/man8/dpkg-statoverride.8.gz /usr/share/man/sv/man8/start-stop-daemon.8.gz /usr/share/man/sv/man8/update-alternatives.8.gz 


# Finally, delete unnecessary stuff
RUN rm -rf /var/cache/* /var/log/*/*.log /var/log/*.log

ADD m4 /usr/bin/m4

RUN echo "ShutIt Source-Built Distro" > /etc/issue
